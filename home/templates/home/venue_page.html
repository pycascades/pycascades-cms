{% extends "base.html" %}
{% load wagtailcore_tags %}
{% load wagtailimages_tags %}

{% block extra_js %}
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA==" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js" integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA==" crossorigin=""></script>
  <script>var locationCoordinates = [{{ page.location_lat }},{{ page.location_long }}]
  var map = L.map(
      'map', {
          scrollWheelZoom: false,
      }
  ).setView(locationCoordinates, 16);
  mapLink = '<a href="http://openstreetmap.org">OpenStreetMap</a>';

  L.tileLayer('https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}', {
      attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
      subdomains: 'abcd',
      minZoom: 0,
      maxZoom: 20,
      ext: 'png'
  }).addTo(map);

  var mapPopup = L.marker(locationCoordinates).bindPopup(
      '{{ page.location_address | safe }}' +
      '<a style="color: black" href="{{ page.location_google_maps_url }}">View on Google Maps</a>'
  ).addTo(map);
  mapPopup.openPopup();
  </script>
{% endblock %}

{% block content %}
  <section id="intro">
    <div du-parallax="du-parallax" y="animator" class="background">
      {% image page.venue_photo original as venue_photo %}
      <div ff-bg="{{ venue_photo.url }}" class="image bg-cover"></div>
      <div class="image-attribution">
        {% if page.venue_attribution %}
          Image credit © {{ page.venue_attribution | safe }}
        {% endif %}
      </div>
    </div>
    <div class="overlay"></div>
    <div class="main vcontainer">
      <div class="inner">
        <div class="container">
          <div in-view="in-view" class="row fade-up">
            <div class="one-half column">
              <h2>{{ page.venue_title }}</h2>
            </div>
            <div class="one-half column">
              <div class="section" id="venue-content">
                {{ page.venue_content | richtext }}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section id="location">
    <div id="map" class="main vcontainer"></div>
  </section>
  <section id="accommodations">
    <div du-parallax="du-parallax" y="animator" class="background">
      {% image page.accommodation_photo original as accommodation_photo %}
      <div ff-bg="{{ accommodation_photo.url }}" class="image bg-cover"></div>
      <div class="image-attribution">
        {% if page.accommodation_attribution %}
          Image credit © {{ page.accommodation_attribution | safe }}
        {% endif %}
      </div>
    </div>
    <div class="overlay"></div>
    <div class="main vcontainer">
      <div class="inner">
        <div class="container">
          <div in-view="in-view" class="row fade-up">
            <div class="one-half column">
              <h2>Accommodation</h2>
            </div>
            <div class="one-half column">
              {{ page.accommodation_content | richtext }}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}
